---
title: Анонс Vite 2.0
author:
  - name: Команда Vite
sidebar: false
date: 2021-02-16
head:
  - - meta
    - property: og:type
      content: website
  - - meta
    - property: og:title
      content: Анонс Vite 2.0
  - - meta
    - property: og:url
      content: https://vite.dev/blog/announcing-vite2
  - - meta
    - property: og:description
      content: Анонс релиза Vite 2
---

# Анонс Vite 2.0

_16 февраля 2021 года_ - Ознакомьтесь с [анонсом Vite 3.0](./announcing-vite3.md)

<p style="text-align:center">
  <img src="/logo.svg" style="height:200px">
</p>

Сегодня мы рады объявить о официальном релизе Vite 2.0!

Vite (французское слово, означающее "быстрый", произносится `/vit/`) - это новый тип инструмента для сборки фронтенда, который значительно улучшает опыт фронтенд-разработки. Он состоит из двух основных компонентов:

- Dev-сервер, который обслуживает ваши исходные файлы через [нативные ES модули](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules), с [богатым встроенным функционалом](https://vite.dev/guide/features.html) и удивительно быстрой [горячей заменой модулей (HMR)](https://vite.dev/guide/features.html#hot-module-replacement).

- [Команда сборки](https://vite.dev/guide/build.html), которая объединяет ваш код с помощью [Rollup](https://rollupjs.org), предварительно настроенная для вывода высокооптимизированных статических ресурсов для продакшена.

Кроме того, Vite легко расширяется через свой [API плагинов](https://vite.dev/guide/api-plugin.html) и [JavaScript API](https://vite.dev/guide/api-javascript.html) с полной поддержкой типизации.

[Читайте документацию, чтобы узнать больше](https://vite.dev).

## Новое в 2.0

Поскольку мы решили полностью переработать внутренности перед выходом 1.0, это на самом деле первый стабильный релиз Vite. Тем не менее, Vite 2.0 приносит много больших улучшений по сравнению с его предыдущей версией:

### Ядро, независимое от фреймворка

Изначальная идея Vite началась как [хакерский прототип, который обслуживает компоненты Vue в формате нативного ESM](https://github.com/vuejs/vue-dev-server). Vite 1 был продолжением этой идеи с реализованным HMR.

Vite 2.0 берет все, что мы узнали на этом пути, и переработан с нуля с более надежной внутренней архитектурой. Теперь он полностью независим от фреймворка, и вся поддержка, специфичная для фреймворка, делегирована плагинам. Теперь есть [официальные шаблоны для Vue, React, Preact, Lit Element](https://github.com/vitejs/vite/tree/main/packages/create-vite), и продолжаются усилия сообщества по интеграции Svelte.

### Новый формат плагинов и API

Вдохновленный [WMR](https://github.com/preactjs/wmr), новая система плагинов расширяет интерфейс плагинов Rollup и совместима со многими плагинами Rollup [из коробки](https://vite-rollup-plugins.patak.dev/). Плагины могут использовать совместимые хуки Rollup, с дополнительными специфичными для Vite хуками и свойствами для настройки поведения, специфичного для Vite (например, различение dev и build или пользовательская обработка HMR).

[Программный API](https://vite.dev/guide/api-javascript.html) также был значительно улучшен для упрощения создания более высокоуровневых инструментов / фреймворков, построенных на основе Vite.

### Предварительная сборка зависимостей на основе esbuild

Поскольку Vite является нативным ESM dev-сервером, он предварительно собирает зависимости, чтобы уменьшить количество запросов браузера и обработать преобразование CommonJS в ESM. Ранее Vite делал это с помощью Rollup, а в 2.0 теперь использует `esbuild`, что приводит к 10-100 раз более быстрой предварительной сборке зависимостей. В качестве справки, холодный запуск тестового приложения с тяжелыми зависимостями, такими как React Material UI, ранее занимал 28 секунд на MacBook Pro с M1, а теперь занимает ~1.5 секунды. Ожидайте аналогичных улучшений, если вы переходите с традиционной настройки бандлера.

### Поддержка CSS на первом уровне

Vite рассматривает CSS как первоклассного гражданина графа модулей и поддерживает следующее из коробки:

- **Улучшение разрешения**: пути `@import` и `url()` в CSS улучшаются с помощью разрешателя Vite, чтобы учитывать псевдонимы и зависимости npm.
- **Перебазирование URL**: пути `url()` автоматически перебазируются независимо от того, откуда файл импортируется.
- **Разделение кода CSS**: код-сплит JS-чанк также создает соответствующий CSS-файл, который автоматически загружается параллельно с JS-чанком при запросе.

### Поддержка серверного рендеринга (SSR)

Vite 2.0 поставляется с [экспериментальной поддержкой SSR](https://vite.dev/guide/ssr.html). Vite предоставляет API для эффективной загрузки и обновления исходного кода на основе ESM в Node.js во время разработки (почти как серверный HMR), и автоматически экстернализует совместимые с CommonJS зависимости для улучшения скорости разработки и сборки SSR. Продакшен-сервер может быть полностью отделен от Vite, и ту же настройку можно легко адаптировать для выполнения предварительного рендеринга / SSG.

SSR Vite предоставляется как низкоуровневая функция, и мы ожидаем, что более высокоуровневые фреймворки будут использовать ее под капотом.

### Поддержка устаревших браузеров по запросу

Vite по умолчанию нацелен на современные браузеры с поддержкой нативного ESM, но вы также можете выбрать поддержку устаревших браузеров с помощью официального [@vitejs/plugin-legacy](https://github.com/vitejs/vite/tree/main/packages/plugin-legacy). Плагин автоматически генерирует двойные современные/устаревшие бандлы и предоставляет правильный бандл на основе обнаружения функций браузера, обеспечивая более эффективный код в современных браузерах, которые их поддерживают.

## Попробуйте это!

Это было много функций, но начать с Vite просто! Вы можете запустить приложение на основе Vite буквально за минуту, начиная с следующей команды (убедитесь, что у вас установлен Node.js >=12):

```bash
npm init @vitejs/app
```

Затем ознакомьтесь с [руководством](https://vite.dev/guide/), чтобы увидеть, что Vite предоставляет из коробки. Вы также можете ознакомиться с исходным кодом на [GitHub](https://github.com/vitejs/vite), следить за обновлениями в [Twitter](https://twitter.com/vite_js) или присоединиться к обсуждениям с другими пользователями Vite на нашем [Discord-сервере](http://chat.vite.dev/).
